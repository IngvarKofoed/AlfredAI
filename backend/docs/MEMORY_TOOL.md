# Memory MCP Tool Documentation

## Overview

The Memory MCP Tool provides active memory management capabilities for the AI assistant, allowing it to remember, recall, update, and manage information during conversations. This tool implements Phase 3 of the memory system architecture, enabling the AI to actively learn and retain information.

## Features

- **Remember**: Store new memories with type, content, tags, and metadata
- **Recall**: Retrieve specific memories by ID
- **Update**: Modify existing memories with new information
- **Forget**: Delete specific memories
- **List**: Display recent memories with pagination
- **Search**: Find memories based on content, type, tags, or other criteria
- **Stats**: Get comprehensive memory statistics
- **Clear**: Reset all memories (use with caution)

## Memory Types

The tool supports five types of memories:

- **fact**: Factual information about the user or context
- **preference**: User preferences and settings
- **goal**: User goals and objectives
- **short-term**: Temporary information relevant to current conversation
- **long-term**: Persistent information that should be retained

## Memory Sources

Memories can originate from three sources:

- **user**: Information provided directly by the user
- **ai**: Information inferred or generated by the AI
- **system**: Information from system processes

## Tool Actions

### remember

Store a new memory in the system.

**Required Parameters:**
- `action`: "remember"
- `content`: The memory content/text
- `type`: Memory type (fact, preference, goal, short-term, long-term)

**Optional Parameters:**
- `tags`: Comma-separated tags for categorization
- `source`: Memory source (user, ai, system)
- `conversationId`: ID of the related conversation
- `metadata`: Additional metadata as JSON string

**Example:**
```json
{
  "action": "remember",
  "content": "User prefers TypeScript over JavaScript for new projects",
  "type": "preference",
  "tags": "programming,language-preference,typescript",
  "source": "user"
}
```

### recall

Retrieve a specific memory by its ID.

**Required Parameters:**
- `action`: "recall"
- `id`: The memory ID

**Example:**
```json
{
  "action": "recall",
  "id": "mem_1234567890_abcdef123"
}
```

### update

Modify an existing memory.

**Required Parameters:**
- `action`: "update"
- `id`: The memory ID

**Optional Parameters:**
- `content`: New content
- `type`: New memory type
- `tags`: New tags (comma-separated)
- `metadata`: New metadata as JSON string

**Example:**
```json
{
  "action": "update",
  "id": "mem_1234567890_abcdef123",
  "content": "Updated memory content",
  "tags": "updated,important"
}
```

### forget

Delete a specific memory.

**Required Parameters:**
- `action`: "forget"
- `id`: The memory ID

**Example:**
```json
{
  "action": "forget",
  "id": "mem_1234567890_abcdef123"
}
```

### list

Display recent memories with optional pagination.

**Required Parameters:**
- `action`: "list"

**Optional Parameters:**
- `limit`: Maximum number of results (default: 10)

**Example:**
```json
{
  "action": "list",
  "limit": "5"
}
```

### search

Find memories based on various criteria.

**Required Parameters:**
- `action`: "search"

**Optional Parameters:**
- `query`: Text to search for in memory content
- `type`: Filter by memory type
- `source`: Filter by memory source
- `tags`: Filter by tags (comma-separated)
- `conversationId`: Filter by conversation ID
- `limit`: Maximum number of results
- `offset`: Number of results to skip (pagination)

**Example:**
```json
{
  "action": "search",
  "query": "coding preferences",
  "type": "preference",
  "limit": "5"
}
```

### stats

Get comprehensive memory statistics.

**Required Parameters:**
- `action`: "stats"

**Example:**
```json
{
  "action": "stats"
}
```

### clear

Reset all memories (use with caution).

**Required Parameters:**
- `action`: "clear"

**Example:**
```json
{
  "action": "clear"
}
```

## Usage Examples

### Basic Memory Operations

1. **Remember a user preference:**
```json
{
  "action": "remember",
  "content": "User prefers dark mode themes",
  "type": "preference",
  "tags": "ui,theme,dark-mode",
  "source": "user"
}
```

2. **Recall a specific memory:**
```json
{
  "action": "recall",
  "id": "mem_1699123456_abc123def"
}
```

3. **Search for programming-related memories:**
```json
{
  "action": "search",
  "tags": "programming,typescript",
  "type": "preference",
  "limit": "10"
}
```

### Advanced Usage

1. **Remember with metadata:**
```json
{
  "action": "remember",
  "content": "User is working on a React project with TypeScript",
  "type": "fact",
  "tags": "project,react,typescript",
  "source": "user",
  "metadata": "{\"importance\": \"high\", \"project\": \"current\"}"
}
```

2. **Update memory with new information:**
```json
{
  "action": "update",
  "id": "mem_1699123456_abc123def",
  "content": "User is working on a React project with TypeScript and Next.js",
  "tags": "project,react,typescript,nextjs"
}
```

3. **Search with multiple criteria:**
```json
{
  "action": "search",
  "query": "project",
  "type": "fact",
  "tags": "react,typescript",
  "limit": "5"
}
```

## Error Handling

The tool provides comprehensive error handling for:

- **Validation Errors**: Invalid parameters, missing required fields
- **Not Found Errors**: Memory ID not found
- **Type Errors**: Invalid memory types or sources
- **Format Errors**: Invalid JSON in metadata

Example error response:
```json
{
  "success": false,
  "error": "Validation error: Memory content is required and must be a string"
}
```

## Integration with Memory System

The Memory MCP Tool integrates with the existing memory system components:

- **Memory Service**: Uses the global memory service instance
- **Memory Manager**: Accesses the memory manager for core operations
- **Memory Store**: Persists memories using the file-based store
- **Memory Types**: Follows the established memory type system

## Best Practices

1. **Use appropriate memory types**: Choose the correct type based on the nature of the information
2. **Add meaningful tags**: Use descriptive tags for better searchability
3. **Include context**: Add relevant metadata and conversation IDs
4. **Regular cleanup**: Use search and forget to manage memory growth
5. **Monitor statistics**: Use stats to understand memory usage patterns

## Security Considerations

- The tool validates all input parameters to prevent injection attacks
- Memory content is sanitized and stored safely
- Access to memory operations can be controlled through tool permissions
- The clear action should be used with caution as it's irreversible

## Performance Notes

- Search operations are optimized for common use cases
- Large memory sets may require pagination using limit and offset
- Memory statistics are computed efficiently
- The tool handles concurrent access safely

## Future Enhancements

- Vector-based similarity search for better memory retrieval
- Automatic memory categorization and tagging
- Memory importance scoring and automatic cleanup
- Integration with conversation context for smarter memory creation
- Export/import functionality for memory backup and migration